var P = require('bluebird');

P.try(log(1)).tap(log(2)).then(log(3));

function log(n) {
    return function () {
        return P.delay(500).then(function () { console.log('boom', n) });
    };
}
